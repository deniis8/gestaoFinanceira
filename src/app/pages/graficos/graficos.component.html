<form [formGroup]="form">
    <mat-form-field appearance="outline" class="campo-ano">
        <mat-label>Ano</mat-label>

        <input matInput [matDatepicker]="picker" formControlName="ano" readonly>

        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>

        <mat-datepicker #picker startView="multi-year" (yearSelected)="anoSelecionado($event, picker)">
        </mat-datepicker>

        <mat-error *ngIf="ano.invalid">
            Ano é obrigatório
        </mat-error>
    </mat-form-field>
</form>


<div class="grafico-calendario" *ngIf="gGMMesAno.length > 0; else registrosNaoEncontrados">

    <div class="calendario-linha" *ngFor="let linha of [0,1,2]; let l = index">

        <ng-container *ngFor="let col of [0,1,2,3]; let c = index">

            <ng-container *ngIf="temRegistro(l * 4 + c); else semRegistro">

                <div class="quadrante" [style.backgroundColor]="gGMCordoQuadrante[l * 4 + c]"
                    (click)="buscarInformacoesGraficoCentroCusto(gGMMesAno[l * 4 + c])">

                    <strong class="nome-mes">
                        {{ gGMLabelMes[l * 4 + c] }}
                    </strong>

                    <p class="valores">
                        + R$ {{ gGMDataValorRecebidoMes[l * 4 + c] }}
                    </p>

                    <p class="valores">
                        - R$ {{ gGMDataValor[l * 4 + c] }}
                    </p>

                    <p class="valores">
                        = R$ {{ gGMDataSobraMes[l * 4 + c] }}
                    </p>

                </div>
            </ng-container>

        </ng-container>
    </div>

    <ng-template #semRegistro>
        <div class="quadrante quadrante-vazio">
            <span class="sem-dados">✕</span>
        </div>
    </ng-template>

</div>
<ng-template #registrosNaoEncontrados>
    <div class="quadrante quadrante-vazio">
        <span>Registros não encontrados!</span>
    </div>
</ng-template>


<br />
<div class="chart-wrapper">
    <div class="chart-container-gmcc">
        <canvas id="gGCCChart">{{ gGCCChart }}</canvas>
    </div>
</div>

<div>
    <div *ngIf="detalhamentoGastosCC.length > 0">
        <table class="table table-striped table-bordered align-middle shadow-sm">
            <thead class="table-dark">
                <tr>
                    <th scope="col">Data Hora</th>
                    <th scope="col">Valor</th>
                    <th scope="col">Descrição Lançamento</th>
                    <th scope="col">Descrição Centro de Custo</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let _detalhamentoGastosCC of detalhamentoGastosCC">
                    <td>{{_detalhamentoGastosCC.dataHora | date: "dd/MM/yyyy HH:mm"}}</td>
                    <td>{{_detalhamentoGastosCC.valor}}</td>
                    <td>{{_detalhamentoGastosCC.descricaoLancamento}}</td>
                    <td>{{_detalhamentoGastosCC.descricaoCentroCusto}}</td>
                    <div class="btn-group">
                        <button routerLink="/lancamento/edit/{{_detalhamentoGastosCC.id}}" type="button"
                            class="btn btn-outline-primary btn-sm botao-editar">
                            <i class="bi bi-pencil-square"></i>
                        </button>
                        <button routerLink="/lancamento/excluir/{{_detalhamentoGastosCC.id}}" type="button"
                            class="btn btn-outline-danger btn-sm botao-remover">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                </tr>
            </tbody>
        </table>
    </div>
</div>